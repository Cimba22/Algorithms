
# 898. Bitwise ORs of Subarrays
`Medium` `Array`
`Dynamic Programming`
`Bit Manipulation`

Given an integer array arr, return the number of distinct bitwise ORs of all the non-empty subarrays of arr.

The bitwise OR of a subarray is the bitwise OR of each integer in the subarray. The bitwise OR of a subarray of one integer is that integer.

A subarray is a contiguous non-empty sequence of elements within an array.



### Example 1:

**Input**: `arr = [0]`

**Output**: `1`

**Explanation**: There is only one possible result: `0`.
____

### Example 2:

**Input**: `arr = [1,1,2]`

**Output**: `3`

**Explanation**: The possible subarrays are `[1], [1], [2], [1, 1], [1, 2], [1, 1, 2]`.

These yield the results `1, 1, 2, 1, 3, 3`.

There are 3 unique values, so the answer is 3.
____

### Example 3:

**Input**: `arr = [1,2,4]`

**Output**: `6`

**Explanation**: The possible results are `1, 2, 3, 4, 6, and 7.`


### Constraints:

`1 <= arr.length <= 5 * 104`

`0 <= arr[i] <= 10^9`
____

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ `subarrayBitwiseORs(int[] arr)` —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ–±–∏—Ç–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ `OR (|)` –Ω–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–¥–º–∞—Å—Å–∏–≤–∞—Ö –º–∞—Å—Å–∏–≤–∞ arr.

```java
public int subarrayBitwiseORs(int[] arr) {
        Set<Integer> uniqueResults = new HashSet<>();
        Set<Integer> currentResults = new HashSet<>();

        for (int num : arr) {
            Set<Integer> newResults = new HashSet<>();
            newResults.add(num);

            for (int current : currentResults) {
                newResults.add(num | current);
            }
            uniqueResults.addAll(currentResults = newResults);
        }
        return uniqueResults.size();
    }
```

### Better solution:
```java
class Solution {
    public int subarrayBitwiseORs(int[] arr) {
        Set<Integer> curr = null;
        Set<Integer> prev = new HashSet<>();
        Set<Integer> uniqs = new HashSet<>();
        for(int x : arr){
            curr = new HashSet<>();
            prev.add(0);
            for(int y : prev){
                curr.add(y | x);
                uniqs.add(y | x);
            }
            prev = curr;
        }
        return uniqs.size();
    }
}
```

## –†–∞–∑–±–æ—Ä –∫–æ–¥–∞
### 1Ô∏è‚É£ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `uniqueResults`: `Set<Integer>` ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø—Ä–∏ OR –æ–ø–µ—Ä–∞—Ü–∏–π.
- `currentResults`: `Set<Integer>` ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –Ω–∞ —Ç–µ–∫—É—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ (–∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–¥–º–∞—Å—Å–∏–≤–æ–≤, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è –Ω–∞ num).
### 2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
–¶–∏–∫–ª –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –∫–∞–∂–¥–æ–º—É —á–∏—Å–ª—É `num` –≤ –º–∞—Å—Å–∏–≤–µ `arr`:

- –°–æ–∑–¥–∞–µ—Ç—Å—è newResults, –∫—É–¥–∞ —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è num, —Ç.–∫. –æ–Ω —Å–∞–º –ø–æ —Å–µ–±–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–º–∞—Å—Å–∏–≤–æ–º –¥–ª–∏–Ω—ã 1.

- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è newResults: –¥–ª—è –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ currentResults (–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ–¥–º–∞—Å—Å–∏–≤—ã, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —ç–ª–µ–º–µ–Ω—Ç–µ), –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è OR —Å num.

    - –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ OR –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏, –Ω–æ –∏ –º–µ–∂–¥—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞:

    - `currentResults` = `newResults`, —Ç–æ –µ—Å—Ç—å —Ç–µ–ø–µ—Ä—å currentResults —Ö—Ä–∞–Ω–∏—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ OR —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–º–∞—Å—Å–∏–≤–æ–≤, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è –Ω–∞ num.
    - `uniqueResults.addAll(currentResults)`, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
### 3Ô∏è‚É£ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä uniqueResults
–≠—Ç–æ—Ç —Ä–∞–∑–º–µ—Ä —É–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª—É—á–∏–ª–æ—Å—å.




## üîπ –°–ª–æ–∂–Ω–æ—Å—Ç—å
- –í —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö `OR` –∑–Ω–∞—á–µ–Ω–∏–π ‚âà `O(n log M)`, –≥–¥–µ `M` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ `arr` (—á–∏—Å–ª–∞ –≤ arr –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –º–∞–∫—Å–∏–º—É–º log M —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π).
- –ü–∞–º—è—Ç—å `O(n log M)` –∏–∑-–∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
### –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã
- ‚úî –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Set` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- ‚úî –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç `OR`-–∏—Ç—Å—è —Å–æ –≤—Å–µ–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —à–∞–≥–æ–≤.
- ‚úî –≠—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–¥–º–∞—Å—Å–∏–≤—ã.

## üîπ –ü–æ—á–µ–º—É OR –ø–æ–ª–µ–∑–µ–Ω –≤ —ç—Ç–æ–π –∑–∞–¥–∞—á–µ?
- –û–Ω –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ (1) –±–∏—Ç—ã.
- –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç num, –æ–Ω OR-–∏—Ç—Å—è —Å–æ –≤—Å–µ–º–∏ —Ä–∞–Ω–µ–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, —Å–æ–∑–¥–∞–≤–∞—è –Ω–æ–≤—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
- –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ —É–º–Ω–æ–∂–µ–Ω–∏—è, –æ–ø–µ—Ä–∞—Ü–∏—è OR –Ω–µ —É–º–µ–Ω—å—à–∞–µ—Ç —á–∏—Å–ª–æ –±–∏—Ç–æ–≤, –∞ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ—Ç 1, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ.