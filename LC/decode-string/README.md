
# üìò 394. Decode String

## üßæ –£—Å–ª–æ–≤–∏–µ

–í–∞–º –¥–∞–Ω–∞ **–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞** `s`. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å **—Ä–∞—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—É—é** —Å—Ç—Ä–æ–∫—É.

–ü—Ä–∞–≤–∏–ª–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:
`k[encoded_string]`, –≥–¥–µ `encoded_string` –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è **k —Ä–∞–∑**.

* `k` ‚Äî –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –≤—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ `s` ‚Äî **–≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–Ω–∞**

    * –°–∫–æ–±–∫–∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã
    * –ù–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤
    * –ù–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª –≤—Ä–æ–¥–µ `3a` –∏–ª–∏ `2[4]`
* –í—Å–µ —Å–∏–º–≤–æ–ª—ã ‚Äî —Å—Ç—Ä–æ—á–Ω—ã–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ —Å–∫–æ–±–∫–∏
* –ß–∏—Å–ª–∞ –æ—Ç 1 –¥–æ 300
* –î–ª–∏–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ‚â§ 10‚Åµ

---

### üîç –ü—Ä–∏–º–µ—Ä—ã:

**–ü—Ä–∏–º–µ—Ä 1:**

```
–í—Ö–æ–¥: s = "3[a]2[bc]"
–í—ã—Ö–æ–¥: "aaabcbc"
```

**–ü—Ä–∏–º–µ—Ä 2:**

```
–í—Ö–æ–¥: s = "3[a2[c]]"
–í—ã—Ö–æ–¥: "accaccacc"
```

**–ü—Ä–∏–º–µ—Ä 3:**

```
–í—Ö–æ–¥: s = "2[abc]3[cd]ef"
–í—ã—Ö–æ–¥: "abcabccdcdcdef"
```

---

## üß† –û–±—ä—è—Å–Ω–µ–Ω–∏–µ

–ß—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É, –Ω—É–∂–Ω–æ **–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏** –∏ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã**:

* –ò—Å–ø–æ–ª—å–∑—É–µ–º **—Å—Ç–µ–∫** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:

    * –ß–∏—Å–ª–∞ `k` ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–¥—Å—Ç—Ä–æ–∫—É
    * –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ–º—ã—Ö –ø–µ—Ä–µ–¥ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å–∫–æ–±–∫–æ–π
* –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª:

    * –¶–∏—Ñ—Ä–∞ ‚Üí —Å–æ—Å—Ç–∞–≤–ª—è–µ–º —á–∏—Å–ª–æ `k`
    * `[` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —á–∏—Å–ª–æ –∏ —Å—Ç—Ä–æ–∫—É, –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é
    * `]` ‚Üí –¥–æ—Å—Ç–∞—ë–º –∏–∑ —Å—Ç–µ–∫–∞ —Å—Ç—Ä–æ–∫—É –∏ `k`, –ø–æ–≤—Ç–æ—Ä—è–µ–º –≤–ª–æ–∂–µ–Ω–Ω—É—é —á–∞—Å—Ç—å –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º –∫ –ø—Ä–æ—à–ª–æ–π
    * –ë—É–∫–≤–∞ ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–µ

---

## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Java

```java
class Solution {
    public String decodeString(String s) {
        Stack<Integer> countStack = new Stack<>();
        Stack<StringBuilder> stringStack = new Stack<>();
        StringBuilder current = new StringBuilder();
        int k = 0;

        for (char ch : s.toCharArray()) {
            if (Character.isDigit(ch)) {
                // –ï—Å–ª–∏ —Ü–∏—Ñ—Ä–∞ ‚Äî —Ñ–æ—Ä–º–∏—Ä—É–µ–º —á–∏—Å–ª–æ k (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ–∑–Ω–∞—á–Ω—ã–º)
                k = k * 10 + (ch - '0');
            } else if (ch == '[') {
                // –û—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                countStack.push(k);
                stringStack.push(current);
                current = new StringBuilder(); // –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –ø–æ–¥—Å—Ç—Ä–æ–∫—É
                k = 0;
            } else if (ch == ']') {
                // –ó–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ ‚Äî –¥–æ—Å—Ç–∞—ë–º —Å—Ç—Ä–æ–∫—É –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º —Ç–µ–∫—É—â—É—é
                StringBuilder decoded = stringStack.pop(); // –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞
                int count = countStack.pop();              // —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
                for (int i = 0; i < count; i++) {
                    decoded.append(current);               // –ø–æ–≤—Ç–æ—Ä—è–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º
                }
                current = decoded; // –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É
            } else {
                // –ü—Ä–æ—Å—Ç–æ –±—É–∫–≤–∞ ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É
                current.append(ch);
            }
        }

        return current.toString();
    }
}
```

---

## üìå –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø—Ä–∏–º–µ—Ä–∞ `"3[a2[c]]"`

1. –ù–∞—á–∏–Ω–∞–µ–º —Å –≤–Ω–µ—à–Ω–µ–π 3\[
2. –í–Ω—É—Ç—Ä–∏ –Ω–µ—ë ‚Äî a2\[c]:

    * –°–Ω–∞—á–∞–ª–∞ "c" –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 2 —Ä–∞–∑–∞ ‚Üí "cc"
    * –ó–∞—Ç–µ–º "a" + "cc" ‚Üí "acc"
3. –ü–æ–≤—Ç–æ—Ä—è–µ–º "acc" 3 —Ä–∞–∑–∞ ‚Üí "accaccacc"

---

## üöÄ –í—Ä–µ–º–µ–Ω–Ω–∞—è –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

* **–í—Ä–µ–º—è:** `O(n)` ‚Äî –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
* **–ü–∞–º—è—Ç—å:** `O(n)` ‚Äî –∏–∑-–∑–∞ —Å—Ç–µ–∫–æ–≤ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

---
